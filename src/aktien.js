import React from 'react';
import './index.css';
import axios from 'axios';

export default function Aktie(props) {
  let aktie = null;
  const [payload, setPayload] = React.useState(null);
  
  if(!payload) {
    axios.get(props.url)
    .then(results => {
       aktie = results.data;
       setPayload(results.data)
    })
  }

  return (<div>
    {payload && 
      <div>
            {/* <h1 className='headline'>AAPL</h1><h1>{zws4}</h1><br /> */}
          {payload.results.map(result => {
            let live = result.vw.toFixed(2);
            let open = result.o;
            let zws1 = open / 100;
            let zws2 = live / zws1;
            let zws3 = zws2 - 100;
            let zws4 = zws3.toFixed(2);
            let zws5 = live - open;
            let zws6 = zws5.toFixed(2);
            if (zws4 > 0) { 
              return <div className='div1'><h1 className='headline'>AAPL</h1><h1 className='plus'>{zws4} %<br /> ({zws6} $)</h1><svg   id="chart"   width="1000"   height="500"   viewBox="0 0 1000 500"   xmlns="http://www.w3.org/2000/svg" >      <path d="M 0,494.4199244109242 C 10.6,492.49682831260753 31.799999999999997,491.60974933805625 53,484.80444391934094 C 74.2,477.99913850062563 84.8,467.77378962966975 106,460.39339731734765 C 127.2,453.01300500502555 137.8,458.7833524650131 159,447.90248235773043 C 180.2,437.0216122504478 190.8,409.338058424189 212,405.9890467809345 C 233.2,402.64003513767994 243.8,428.2772526440428 265,431.1574241414577 C 286.2,434.0375956388726 296.8,438.2102321976999 318,420.389904268009 C 339.2,402.5695763383181 349.8,361.5943646974173 371,342.0557844930031 C 392.2,322.5172042885889 402.8,315.0242758858413 424,322.69700324593816 C 445.2,330.36973060603503 455.8,390.58876119280376 477,380.4194212934875 C 498.2,370.2500813941713 508.8,277.55493354615095 530,271.85030374935695 C 551.2,266.14567395256296 561.8,355.75817708295375 583,351.8962723095176 C 604.2,348.03436753608145 614.8,281.9679733385798 636,252.5407798821763 C 657.2,223.11358642577284 667.8,227.303048208419 689,204.7603050275003 C 710.2,182.2175618465816 720.8,144.4386439171971 742,139.82706397758284 C 763.2,135.21548403796857 773.8,162.58507984721595 795,181.70240532942898 C 816.2,200.81973081164202 826.8,220.61921596513432 848,235.41369138864798 C 869.2,250.20816681216164 879.8,277.22177397372553 901,255.67478244699726 C 922.2,234.12779092026895 932.8,168.73512765984995 954,127.67873375500648 C 975.2,86.622339850163 996.4,65.84999708922523 1007,50.39281292277991,L 1000 500,L 0 500Z" fill="#90ee901a" />   <path d="M 0,494.4199244109242 C 10.6,492.49682831260753 31.799999999999997,491.60974933805625 53,484.80444391934094 C 74.2,477.99913850062563 84.8,467.77378962966975 106,460.39339731734765 C 127.2,453.01300500502555 137.8,458.7833524650131 159,447.90248235773043 C 180.2,437.0216122504478 190.8,409.338058424189 212,405.9890467809345 C 233.2,402.64003513767994 243.8,428.2772526440428 265,431.1574241414577 C 286.2,434.0375956388726 296.8,438.2102321976999 318,420.389904268009 C 339.2,402.5695763383181 349.8,361.5943646974173 371,342.0557844930031 C 392.2,322.5172042885889 402.8,315.0242758858413 424,322.69700324593816 C 445.2,330.36973060603503 455.8,390.58876119280376 477,380.4194212934875 C 498.2,370.2500813941713 508.8,277.55493354615095 530,271.85030374935695 C 551.2,266.14567395256296 561.8,355.75817708295375 583,351.8962723095176 C 604.2,348.03436753608145 614.8,281.9679733385798 636,252.5407798821763 C 657.2,223.11358642577284 667.8,227.303048208419 689,204.7603050275003 C 710.2,182.2175618465816 720.8,144.4386439171971 742,139.82706397758284 C 763.2,135.21548403796857 773.8,162.58507984721595 795,181.70240532942898 C 816.2,200.81973081164202 826.8,220.61921596513432 848,235.41369138864798 C 869.2,250.20816681216164 879.8,277.22177397372553 901,255.67478244699726 C 922.2,234.12779092026895 932.8,168.73512765984995 954,127.67873375500648 C 975.2,86.622339850163 996.4,65.84999708922523 1007,50.39281292277991" fill="none" stroke="#90ee90" stroke-width="4px" />   <g>   		<circle cx="0" cy="494.4199244109242" r="8" fill="#90ee90" />,		<circle cx="53" cy="484.80444391934094" r="8" fill="#90ee90" />,		<circle cx="106" cy="460.39339731734765" r="8" fill="#90ee90" />,		<circle cx="159" cy="447.90248235773043" r="8" fill="#90ee90" />,		<circle cx="212" cy="405.9890467809345" r="8" fill="#90ee90" />,		<circle cx="265" cy="431.1574241414577" r="8" fill="#90ee90" />,		<circle cx="318" cy="420.389904268009" r="8" fill="#90ee90" />,		<circle cx="371" cy="342.0557844930031" r="8" fill="#90ee90" />,		<circle cx="424" cy="322.69700324593816" r="8" fill="#90ee90" />,		<circle cx="477" cy="380.4194212934875" r="8" fill="#90ee90" />,		<circle cx="530" cy="271.85030374935695" r="8" fill="#90ee90" />,		<circle cx="583" cy="351.8962723095176" r="8" fill="#90ee90" />,		<circle cx="636" cy="252.5407798821763" r="8" fill="#90ee90" />,		<circle cx="689" cy="204.7603050275003" r="8" fill="#90ee90" />,		<circle cx="742" cy="139.82706397758284" r="8" fill="#90ee90" />,		<circle cx="795" cy="181.70240532942898" r="8" fill="#90ee90" />,		<circle cx="848" cy="235.41369138864798" r="8" fill="#90ee90" />,		<circle cx="901" cy="255.67478244699726" r="8" fill="#90ee90" />,		<circle cx="954" cy="127.67873375500648" r="8" fill="#90ee90" />,		<circle cx="1007" cy="50.39281292277991" r="8" fill="#90ee90" />   </g> </svg><p className='livePrice'>{live}</p></div>
            } else if (zws4 < 0) {
             return <div><h1 className='headline'>AAPL</h1><h1 className='minus'>{zws4} %<br /> ({zws6} $)</h1><svg   id="chart"   width="1000"   height="500"   viewBox="0 0 1000 500"   xmlns="http://www.w3.org/2000/svg" >      <path d="M 0,494.4962417302408 C 10.600000000000001,491.58118021877925 31.8,488.0272213668174 53,479.9209341729331 C 74.2,471.81464697904875 84.8,460.00240811308197 106,453.96480576081905 C 127.2,447.9272034085561 137.8,455.8668879784292 159,449.7329224116185 C 180.2,443.59895684480784 190.8,435.73752217232555 212,423.2949779267658 C 233.2,410.85243368120604 243.8,397.85034304572633 265,387.5202011838197 C 286.2,377.1900593219131 296.8,374.1246689384304 318,371.6442686172328 C 339.2,369.1638682960352 349.8,378.99764103098545 371,375.1181995778319 C 392.2,371.2387581246783 402.8,370.99652150524776 424,352.24706135146494 C 445.2,333.4976011976821 455.8,288.32341283122656 477,281.3708988089179 C 498.2,274.41838478660924 508.8,303.53576039249765 530,317.4844912399217 C 551.2,331.4332220873457 561.8,358.68736583436646 583,351.1145530460381 C 604.2,343.54174025770976 614.8,313.26659456167283 636,279.6204272982799 C 657.2,245.97426003488695 667.8,207.19596901347455 689,182.8837167290735 C 710.2,158.5714644446725 720.8,143.7804941263547 742,158.0591658762748 C 763.2,172.33783762619487 773.8,233.28967220175107 795,254.27707547867394 C 816.2,275.2644787555968 826.8,259.61320383380985 848,262.9961822608891 C 869.2,266.3791606879684 879.8,304.8121975618261 901,271.19196761407034 C 922.2,237.57173766631456 932.8,123.99669256199952 954,94.89503252211034 C 975.2,65.79337248222117 996.4,119.52594043612166 1007,125.6836674146245,L 1000 500,L 0 500Z" fill="#ff00001a" />   <path d="M 0,494.4962417302408 C 10.600000000000001,491.58118021877925 31.8,488.0272213668174 53,479.9209341729331 C 74.2,471.81464697904875 84.8,460.00240811308197 106,453.96480576081905 C 127.2,447.9272034085561 137.8,455.8668879784292 159,449.7329224116185 C 180.2,443.59895684480784 190.8,435.73752217232555 212,423.2949779267658 C 233.2,410.85243368120604 243.8,397.85034304572633 265,387.5202011838197 C 286.2,377.1900593219131 296.8,374.1246689384304 318,371.6442686172328 C 339.2,369.1638682960352 349.8,378.99764103098545 371,375.1181995778319 C 392.2,371.2387581246783 402.8,370.99652150524776 424,352.24706135146494 C 445.2,333.4976011976821 455.8,288.32341283122656 477,281.3708988089179 C 498.2,274.41838478660924 508.8,303.53576039249765 530,317.4844912399217 C 551.2,331.4332220873457 561.8,358.68736583436646 583,351.1145530460381 C 604.2,343.54174025770976 614.8,313.26659456167283 636,279.6204272982799 C 657.2,245.97426003488695 667.8,207.19596901347455 689,182.8837167290735 C 710.2,158.5714644446725 720.8,143.7804941263547 742,158.0591658762748 C 763.2,172.33783762619487 773.8,233.28967220175107 795,254.27707547867394 C 816.2,275.2644787555968 826.8,259.61320383380985 848,262.9961822608891 C 869.2,266.3791606879684 879.8,304.8121975618261 901,271.19196761407034 C 922.2,237.57173766631456 932.8,123.99669256199952 954,94.89503252211034 C 975.2,65.79337248222117 996.4,119.52594043612166 1007,125.6836674146245" fill="none" stroke="#ff0000" stroke-width="4px" />   <g>   		<circle cx="0" cy="494.4962417302408" r="8" fill="#ff0000" />,		<circle cx="53" cy="479.9209341729331" r="8" fill="#ff0000" />,		<circle cx="106" cy="453.96480576081905" r="8" fill="#ff0000" />,		<circle cx="159" cy="449.7329224116185" r="8" fill="#ff0000" />,		<circle cx="212" cy="423.2949779267658" r="8" fill="#ff0000" />,		<circle cx="265" cy="387.5202011838197" r="8" fill="#ff0000" />,		<circle cx="318" cy="371.6442686172328" r="8" fill="#ff0000" />,		<circle cx="371" cy="375.1181995778319" r="8" fill="#ff0000" />,		<circle cx="424" cy="352.24706135146494" r="8" fill="#ff0000" />,		<circle cx="477" cy="281.3708988089179" r="8" fill="#ff0000" />,		<circle cx="530" cy="317.4844912399217" r="8" fill="#ff0000" />,		<circle cx="583" cy="351.1145530460381" r="8" fill="#ff0000" />,		<circle cx="636" cy="279.6204272982799" r="8" fill="#ff0000" />,		<circle cx="689" cy="182.8837167290735" r="8" fill="#ff0000" />,		<circle cx="742" cy="158.0591658762748" r="8" fill="#ff0000" />,		<circle cx="795" cy="254.27707547867394" r="8" fill="#ff0000" />,		<circle cx="848" cy="262.9961822608891" r="8" fill="#ff0000" />,		<circle cx="901" cy="271.19196761407034" r="8" fill="#ff0000" />,		<circle cx="954" cy="94.89503252211034" r="8" fill="#ff0000" />,		<circle cx="1007" cy="125.6836674146245" r="8" fill="#ff0000" />   </g> </svg><p className='livePrice'>{live}</p></div>
           } else if (zws4 === zws6) {
              return <div><h1 className='headline'>AAPL</h1><h1 className='neutral'>{zws4} %<br /> ({zws6} $)</h1><svg   id="chart"   width="1000"   height="500"   viewBox="0 0 1000 500"   xmlns="http://www.w3.org/2000/svg" >      <path d="M 0,493.66648797739634 C 10.6,490.0593943009825 31.8,480.82328919702366 53,475.6310195953271 C 74.2,470.4387499936305 84.8,471.9527183678077 106,467.70513996891333 C 127.2,463.457561570019 137.8,458.55163110574915 159,454.39312760085534 C 180.2,450.2346240959615 190.8,462.0977967054552 212,446.9126224444443 C 233.2,431.7274481834334 243.8,394.61548682659105 265,378.46725629580095 C 286.2,362.31902576501085 296.8,370.51181432141067 318,366.1714697904938 C 339.2,361.83112525957694 349.8,361.60807519712887 371,356.7655336412165 C 392.2,351.92299208530414 402.8,358.6491622295737 424,341.9587620109321 C 445.2,325.26836179229053 455.8,291.30393221889665 477,273.3135325480086 C 498.2,255.3231328771205 508.8,256.8630693215129 530,252.00676365649173 C 551.2,247.15045799147052 561.8,258.10978999541544 583,249.03200422290257 C 604.2,239.95421845038973 614.8,196.17259662340044 636,206.6178347939275 C 657.2,217.06307296445456 667.8,309.54577010028135 689,301.25819507553786 C 710.2,292.97062005079437 720.8,183.61149234978748 742,165.17995967021 C 763.2,146.7484269906325 773.8,218.93195889389375 795,209.10053167765045 C 816.2,199.26910446140715 826.8,120.54497877785698 848,116.02282358899356 C 869.2,111.50066840013014 879.8,172.54140561318133 901,186.48975573333334 C 922.2,200.43810585348535 932.8,186.59079915026334 954,185.76457418975366 C 975.2,184.93834922924398 996.4,183.0398195825787 1007,182.35863093078495,L 1000 500,L 0 500Z" fill="#ffffff1a" />   <path d="M 0,493.66648797739634 C 10.6,490.0593943009825 31.8,480.82328919702366 53,475.6310195953271 C 74.2,470.4387499936305 84.8,471.9527183678077 106,467.70513996891333 C 127.2,463.457561570019 137.8,458.55163110574915 159,454.39312760085534 C 180.2,450.2346240959615 190.8,462.0977967054552 212,446.9126224444443 C 233.2,431.7274481834334 243.8,394.61548682659105 265,378.46725629580095 C 286.2,362.31902576501085 296.8,370.51181432141067 318,366.1714697904938 C 339.2,361.83112525957694 349.8,361.60807519712887 371,356.7655336412165 C 392.2,351.92299208530414 402.8,358.6491622295737 424,341.9587620109321 C 445.2,325.26836179229053 455.8,291.30393221889665 477,273.3135325480086 C 498.2,255.3231328771205 508.8,256.8630693215129 530,252.00676365649173 C 551.2,247.15045799147052 561.8,258.10978999541544 583,249.03200422290257 C 604.2,239.95421845038973 614.8,196.17259662340044 636,206.6178347939275 C 657.2,217.06307296445456 667.8,309.54577010028135 689,301.25819507553786 C 710.2,292.97062005079437 720.8,183.61149234978748 742,165.17995967021 C 763.2,146.7484269906325 773.8,218.93195889389375 795,209.10053167765045 C 816.2,199.26910446140715 826.8,120.54497877785698 848,116.02282358899356 C 869.2,111.50066840013014 879.8,172.54140561318133 901,186.48975573333334 C 922.2,200.43810585348535 932.8,186.59079915026334 954,185.76457418975366 C 975.2,184.93834922924398 996.4,183.0398195825787 1007,182.35863093078495" fill="none" stroke="#ffffff" stroke-width="4px" />   <g>   		<circle cx="0" cy="493.66648797739634" r="8" fill="#ffffff" />,		<circle cx="53" cy="475.6310195953271" r="8" fill="#ffffff" />,		<circle cx="106" cy="467.70513996891333" r="8" fill="#ffffff" />,		<circle cx="159" cy="454.39312760085534" r="8" fill="#ffffff" />,		<circle cx="212" cy="446.9126224444443" r="8" fill="#ffffff" />,		<circle cx="265" cy="378.46725629580095" r="8" fill="#ffffff" />,		<circle cx="318" cy="366.1714697904938" r="8" fill="#ffffff" />,		<circle cx="371" cy="356.7655336412165" r="8" fill="#ffffff" />,		<circle cx="424" cy="341.9587620109321" r="8" fill="#ffffff" />,		<circle cx="477" cy="273.3135325480086" r="8" fill="#ffffff" />,		<circle cx="530" cy="252.00676365649173" r="8" fill="#ffffff" />,		<circle cx="583" cy="249.03200422290257" r="8" fill="#ffffff" />,		<circle cx="636" cy="206.6178347939275" r="8" fill="#ffffff" />,		<circle cx="689" cy="301.25819507553786" r="8" fill="#ffffff" />,		<circle cx="742" cy="165.17995967021" r="8" fill="#ffffff" />,		<circle cx="795" cy="209.10053167765045" r="8" fill="#ffffff" />,		<circle cx="848" cy="116.02282358899356" r="8" fill="#ffffff" />,		<circle cx="901" cy="186.48975573333334" r="8" fill="#ffffff" />,		<circle cx="954" cy="185.76457418975366" r="8" fill="#ffffff" />,		<circle cx="1007" cy="182.35863093078495" r="8" fill="#ffffff" />   </g> </svg><p className='livePrice'>{live}</p></div> 
            }else {
              return <h1>error</h1>
            }
          })}
      </div> 
    }
  </div>);
}

//          ______
// |\      |       \
// | \     |        |
// |  \    |______ /
// |   \   |       \
// |    \  |        \
// |     \ |         \
// |      \|          \

// https://api.polygon.io/v2/aggs/ticker/AAPL/range/1/day/2021-07-22/2021-07-22?adjusted=true&sort=asc&limit=120&apiKey=cMJpjZ_3DNh4bOxSPpvOwIln0gfewRfV